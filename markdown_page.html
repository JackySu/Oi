<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>在线Markdown编辑器</title>
    <link rel="icon" href="Pics/avatar.jpg" type="image/x-icon">

    <link rel="stylesheet" href="https://unpkg.com/mditor@1.0.5/dist/css/mditor.min.css" />
</head>

<body>
    <!--with reference to https://www.npmjs.com/package/mditor -->
    <textarea name="editor" id="editor"></textarea>
    <script src="https://unpkg.com/mditor@1.0.5/dist/js/mditor.min.js"></script>
    <script type="text/javascript">
        var mditor = Mditor.fromTextarea(document.getElementById('editor'));

        //获取或设置编辑器的值
        mditor.on('ready', function () {
            console.log(mditor.value);
            mditor.value = '** hello **';
            mditor.split = true;
            mditor.preview = true;
            mditor.fullscreen = false;
        });
    </script>

    <script type="text/javascript">
        // 计算加载时间
        function getEntryTiming(entry) {
            var obj = {};
            // 获取重定向的时间
            obj.redirectTime = entry.redirectEnd - entry.redirectStart;
            // 获取DNS查询耗时
            obj.lookupDomainTime = entry.domainLookupEnd - entry.domainLookupStart;
            // 获取TCP链接耗时
            obj.connectTime = entry.connectEnd - entry.connectStart;
            // HTTP请求耗时
            obj.requestTime = entry.responseEnd - entry.responseStart;

            obj.name = entry.name;
            obj.entryType = entry.entryType;
            obj.initiatorType = entry.initiatorType;
            obj.duration = entry.duration;
            return obj;
        }
        window.onload = function () {
            var entries = window.performance.getEntries();
            console.log(entries);
            entries.forEach(function (item) {
                if (item.initiatorType) {
                    var curItem = getEntryTiming(item);
                    console.log(curItem);
                }
            });
        }
    </script>
    
</body>

</html>